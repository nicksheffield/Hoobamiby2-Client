angular.module("app.controllers",[]),angular.module("app.directives",[]),angular.module("app.filters",[]),angular.module("app.services",[]),angular.module("app.routes",[]),angular.module("app",["ngStorage","ngSocket","ui.router","app.controllers","app.directives","app.filters","app.services","app.routes"]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),angular.module("app.routes").run(["$rootScope","$state","$memory",function(e,o,a){e.$on("$stateChangeStart",function(e,t,n){if(t.data){var r=t.data.requireLogin;r&&!a.player.nickname&&(e.preventDefault(),a.token=n.roomName,o.go("login")),"login"==t.name&&a.player.nickname&&(e.preventDefault(),o.go("lobby"))}})}]),angular.module("app.routes").config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("login",{url:"/",templateUrl:"app/views/login.html",controller:"loginCtrl",data:{requireLogin:!1}}).state("lobby",{url:"/lobby",templateUrl:"app/views/lobby.html",controller:"lobbyCtrl",data:{requireLogin:!0}}).state("game",{url:"/game/:roomName",templateUrl:"app/views/game.html",controller:"gameCtrl",data:{requireLogin:!0}})}]),angular.module("app.controllers").controller("gameCtrl",["$scope","$memory","$state","$stateParams","$socket",function(e,o,a,t,n){var r=t.roomName;r||a.go("lobby"),void 0===o.game.roomName&&n.emit("join",{roomName:r,nickname:o.player.nickname}),e.start=function(){n.emit("start")},e.choose=function(e){o.player.isJudge&&n.emit("choose",{socketID:e})},n.on("noGame",function(){a.go("lobby")}),n.on("gameJoined",function(e){o.game=e.game,o.player=e.player})}]),angular.module("app.directives").directive("blackCard",[function(){function e(e,o,a){e.$watch("data",function(o,a){void 0!==e.data&&(e.data.text=e.data.text.replace("%s","_____"),e.data.text=e.data.text.replace("%s2","_____"),e.data.text=e.data.text.replace("%s3","_____"))})}return{restrict:"E",templateUrl:"app/views/blackCardDirective.html",scope:{data:"="},link:e}}]),angular.module("app.filters").filter("range",function(){return function(e,o){o=parseInt(o);for(var a=0;o>a;a++)e.push(a);return e}}),angular.module("app.services").factory("$memory",["$localStorage","$socket",function(e,o){var a={game:{},token:"",player:{nickname:e.nickname},forget:function(){this.player={},delete e.nickname}};return o.on("gameUpdate",function(e){a.game=e,console.log("gameUpdate",e)}),o.on("playerUpdate",function(e){a.player=e,console.log("playerUpdate",e)}),a}]),angular.module("app.controllers").controller("lobbyCtrl",["$scope","$socket","$memory","$state",function(e,o,a,t){e.roomName="",e.join=function(){console.log(e.roomName),o.emit("join",{roomName:e.roomName,nickname:a.player.nickname})},o.emit("leave"),e.create=function(){console.log(o.id),o.emit("create",{nickname:a.player.nickname})},o.on("gameJoined",function(e){a.game=e.game,a.player=e.player,console.log(e.player),t.go("game",{roomName:e.game.roomName.toUpperCase()})}),o.on("noGame",function(){console.log("no game exists at",e.roomName)}),o.on("gameCreated",function(e){console.log("gameCreated"),a.game=e.game,a.player=e.player,t.go("game",{roomName:e.game.roomName.toUpperCase()})})}]),angular.module("app.directives").directive("card",["$memory","$socket",function(e,o){function a(a,t,n){a.choose=function(){console.log("clicked"),console.log("waiting?",e.player.waiting),e.player.submissions.length<e.game.blackCard.pick&&e.game.started&&!e.player.waiting&&(e.player.submissions.push(a.data),console.log("emitting"),o.emit("submit",a.data))},a.submitted=function(o){var a=_.find(e.player.submissions,function(e){return e.text==o.text});return a},a.memory=e}return{restrict:"E",templateUrl:"app/views/cardDirective.html",scope:{data:"=",clickable:"=",chosen:"="},link:a}}]),angular.module("app.controllers").controller("loginCtrl",["$scope","$localStorage","$state","$memory",function(e,o,a,t){e.login=function(){console.log(t.player),""!==t.player.nickname.trim()&&(o.nickname=t.player.nickname.substring(0,10),t.token?a.go("game",{roomName:t.token}):a.go("lobby"))}}]),angular.module("app.directives").directive("dropZone",[function(){function e(e,o,a){e.doTheThing=function(e,o){console.log(o.draggable[0])},e.dropOptions={onDrop:"doTheThing"}}return{restrict:"E",templateUrl:"app/views/dropZoneDirective.html",scope:{model:"="},link:e}}]),angular.module("app.controllers").controller("mainCtrl",["$scope","$state","$memory",function(e,o,a){e.memory=a,e.openMenu=!1,e.showMenu=function(){e.openMenu=!e.openMenu},e.logout=function(){a.forget(),o.go("login"),e.openMenu=!1}}]),angular.module("app.directives").directive("flex",[function(){function e(e,o,a){a.$observe("flex",function(e){o.css("flex",parseInt(e))})}return{restrict:"A",link:e}}]),angular.module("app.directives").directive("icon",[function(){return{restrict:"EA",scope:{glyph:"@"},template:'<i class="fa fa-{{glyph}}"></i>'}}]),angular.module("app.directives").directive("layout",[function(){function e(e,o,a){}return{restrict:"A",link:e}}]);